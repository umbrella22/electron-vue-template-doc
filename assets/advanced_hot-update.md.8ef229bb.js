import{_ as e,c as o,o as d,a as t}from"./app.a89c1e9e.js";const f=JSON.parse('{"title":"热更新","description":"","frontmatter":{},"headers":[{"level":2,"title":"需要一个能够无权限访问得地址。","slug":"需要一个能够无权限访问得地址。","link":"#需要一个能够无权限访问得地址。","children":[]}],"relativePath":"advanced/hot-update.md","lastUpdated":1677753441000}'),c={name:"advanced/hot-update.md"},a=t('<h1 id="热更新" tabindex="-1">热更新 <a class="header-anchor" href="#热更新" aria-hidden="true">#</a></h1><ul><li>hotPublishUrl为完整的url,比如<code>https://www.xxxxx.com</code></li><li>hotPublishConfigName则是拼接在url后面的文件名称，完整示例<code>https://www.xxxxx.com/update-config.json</code>；其中<code>update-config</code>为hotPublishConfigName</li></ul><h2 id="需要一个能够无权限访问得地址。" tabindex="-1">需要一个能够无权限访问得地址。 <a class="header-anchor" href="#需要一个能够无权限访问得地址。" aria-hidden="true">#</a></h2><ul><li>在运行完build命令以后执行<code>yarn pack:resources</code></li><li>等待命令完成以后，您会在<code>控制台输出中</code>的路径中找到您设置过得<code>hotPublishConfigName</code>的一个json文件，请将它和目录同级得<code>.zip</code>文件一起存放到您的文件服务器目录.</li><li>之后在渲染进程内通过<code>ipcRenderer.invoke(&quot;hot-update&quot;)</code>来启动热更新程序。然后在渲染进程中通过<code>ipcRenderer.on(&quot;hot-update-status&quot;)</code>即可监听到热更新的状态，如果没有任何意外，该ipc则会返回<code>finished</code>，表示热更新已完成，您就可以提示用户重启或者自行重启即可应用更新。但是若有错误，该ipc则会返回<code>failed</code>状态并在<code>message</code>对象中一并返回错误信息。</li></ul><div class="warning custom-block"><p class="custom-block-title">提醒</p><p>在项目中，您可以通过修改您的版本号小于1.0.0，然后修改渲染进程内的一些文件，能够看出和原仓库有明显区别之后，运行<code>yarn build:dir</code>命令，在打包完成以后，启动项目并点击检查热更新，即可看到效果。</p><p>目前暂时只支持走github的page server，可能会因为您的地域限制，导致无法访问，如果您愿意等待，我将会在后续推出码云版本，若您需要马上看到效果，则您可能需要一些魔法。（欸嘿~）</p></div>',5),i=[a];function s(l,r,n,h,u,p){return d(),o("div",null,i)}const m=e(c,[["render",s]]);export{f as __pageData,m as default};
